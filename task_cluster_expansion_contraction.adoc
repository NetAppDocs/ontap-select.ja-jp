---
sidebar: sidebar 
permalink: task_cluster_expansion_contraction.html 
keywords: cluster, expand, expansion, contract, contraction, six, eight, node deployment workflow, workflow, deployment steps 
summary: ONTAP Select 9.15.1以降では、既存のクラスタのサイズを6ノードから8ノードに拡張し、クラスタサイズを8ノードから6ノードに縮小できます。 
---
= ONTAP Select ESXiまたはKVMクラスタを拡張または縮小する
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ESXi および KVM ハイパーバイザー ホストの既存のONTAP Selectクラスタのクラスタ サイズを増やすことができます。  KVM ホストの場合、クラスターのサイズを 6 ノードから 8 ノードに増やしたり、8 ノードから 6 ノードに減らしたりできます。  ESXi ホストの場合、クラスター サイズを 6 ノードから 12 ノードの間で増分して増減します。

次のクラスターの拡張と縮小は、ESXi および KVM ホストではサポートされていません。

* 1ノード、2ノード、または4ノードのクラスタから6ノードまたは8ノードのクラスタへの拡張
* 6ノードまたは8ノードクラスタから1ノード、2ノード、または4ノードクラスタへの収縮。


[NOTE]
====
クラスター内のノード数を、クラスターの拡張または縮小でサポートされないサイズに変更するには、次のタスクを実行する必要があります。

. 新しいマルチノードクラスタを展開するには、 link:task_cli_deploy_cluster.html["CLI"]またはlink:task_deploy_cluster.html["ウェブUI"] ONTAP Select Deploy 管理ユーティリティに付属しています。
. 該当する場合は、次の方法でデータを新しいクラスタに移行します。 link:https://docs.netapp.com/us-en/ontap/data-protection/snapmirror-disaster-recovery-concept.html["SnapMirrorレプリケーション"^] 。


====
クラスタの拡張および縮小手順は、CLI、API、または Web インターフェイスを使用して、 ONTAP Select Deploy から開始します。



== ハードウェアとストレージに関する考慮事項

クラスターの拡張および縮小機能は、次の KVM および ESXi ハイパーバイザー ホストでサポートされています。

[role="tabbed-block"]
====
.ESXi
--
ONTAP Select 9.15.1 以降では、ESXi ハイパーバイザー ホストでクラスタの拡張と縮小がサポートされます。

クラスタの拡張と縮小は、次の ESXi ハイパーバイザー バージョンでサポートされています。

* ESXi 8.0 U3
* ESXi 8.0 U2
* ESXi 8.0 U1
* ESXi 8.0GA
* ESXi 7.0 U3
* ESXi 7.0


--
.KVM の略
--
ONTAP Select 9.17.1 以降では、KVM ハイパーバイザー ホストでクラスタの拡張と縮小がサポートされます。

クラスターの拡張と縮小は、次の KVM ハイパーバイザー バージョンでサポートされています。

* Red Hat Enterprise Linux 64 ビット 9.6、9.5、9.4、9.3、9.2、9.1、9.0、8.8、8.7、および 8.6
* Rocky Linux 9.6、9.5、9.4、9.3、9.2、9.1、9.0、8.9、8.8、8.7、および 8.6


--
====


== クラスタを拡張

クラスタ拡張機能を使用して、既存の ESXi または KVM クラスタのサイズを拡大します。

[role="tabbed-block"]
====
.ESXi
--
既存の ESXi クラスタのサイズは、次の増分単位で増やすことができます。

* 6ノードから8、10、12ノードへ
* 8ノードから10または12ノードへ
* 10から12ノード


--
.KVM の略
--
既存の KVM クラスターのサイズを 6 ノードから 8 ノードに増やすことができます。

--
====
.このタスクについて
クラスタ拡張の準備として、新しいESXiおよびKVMホストがインベントリに追加され、新しいノードの詳細が割り当てられます。クラスタ拡張プロセスを開始する前に、ネットワーク事前チェックによって、選択された内部ネットワークが検証されます。

.作業を開始する前に
* マルチノードクラスタを展開する場合は、ネットワーク接続チェッカーの使い方を理解しておく必要があります。ネットワーク接続チェッカーは、 link:task_adm_connectivity.html["ウェブUI"]またはlink:task_cli_connectivity.html["CLI"] 。
* 新しいノードのライセンスの詳細を確認します。


.手順
. 管理者アカウントを使用して、 Deploy ユーティリティの Web ユーザインターフェイスにサインインします。
. ページ上部の*[クラスタ]*タブを選択し、リストから目的のクラスタを選択します。
. クラスタの詳細ページで、ページの右側にある歯車アイコンを選択し、*[クラスタの拡張]*を選択します。
. [HA Pair 4*]セクションに移動します。
. 4 番目の HA ペアに対して、次の高可用性 (HA) ペア構成の詳細を選択します。
+
** インスタンスタイプ
** ノード名
** カンレンフハイパーバイザーホスト
** ノードのIPアドレス
** ライセンス
** ネットワーク構成
** ストレージ構成（RAIDタイプとストレージプール）


. [HAペアの保存]*を選択して、構成の詳細を保存します。
. ONTAP認証情報を入力し、[*Expand Cluster*] を選択します。
. [次へ]*を選択し、*[実行]*を選択してネットワークの事前確認を実行します。
+
ネットワークの事前チェックでは、ONTAPクラスタトラフィック用に選択した内部ネットワークが正常に機能しているかどうかを検証します。

. [クラスタの拡張]*を選択してクラスタの拡張プロセスを開始し、ダイアログボックスで*[OK]*を選択します。
+
クラスタが拡張されるまでに最大45分かかることがあります。

. 複数の手順で構成されるクラスタ拡張プロセスを監視して、クラスタが正常に拡張されたことを確認します。
. 処理の進捗状況の定期的な更新については、*[イベント]*タブを参照してください。ページは一定の間隔で自動的に更新されます。


.完了後
クラスタを拡張したら、ONTAP Select Deployの設定データをバックアップする必要があります。



== クラスタを契約する

クラスター縮小機能を使用して、既存の ESXi または KVM クラスターのサイズを縮小します。

[role="tabbed-block"]
====
.ESXi
--
既存の ESXi クラスタのサイズは、次の増分単位で縮小できます。

* 12ノードから10、8、または6ノードへ
* 10ノードから8または6ノードへ
* 8ノードから6ノードへ


--
.KVM の略
--
既存のクラスターのサイズを 8 ノードから 6 ノードに減らすことができます。

--
====
.このタスクについて
手順の実行中にクラスタを縮小する準備として、必要に応じてクラスタ内のノードのHAペアが選択されます。

.手順
. 管理者アカウントを使用して、 Deploy ユーティリティの Web ユーザインターフェイスにサインインします。
. ページ上部の*[クラスタ]*タブを選択し、リストから目的のクラスタを選択します。
. クラスタの詳細ページで、ページの右側にある歯車アイコンを選択し、*[Contract Cluster]*を選択します。
. 削除するHAペアのHAペア構成の詳細を選択してONTAPクレデンシャルを指定し、*[Contract Cluster]*を選択します。
+
クラスタが契約されるまでに最大30分かかることがあります。

. マルチステップのクラスタ収縮プロセスを監視して、クラスタが正常に収縮したことを確認します。
. 処理の進捗状況の定期的な更新については、*[イベント]*タブを参照してください。ページは一定の間隔で自動的に更新されます。

